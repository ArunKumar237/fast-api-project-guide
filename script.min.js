(()=>{"use strict";const t="#sidebar",e=".nav-link[href^='#']",n=".nav-group-toggle",o="#back-to-top",r="#progress-fill",i="#search-btn",s="#search-modal",a=".search-modal-backdrop",c="#search-input",l="#search-results",d="#main-content",u=".content-section .section-header";let m="",f=null;const h=(t,e=document)=>e.querySelector(t),g=(t,e=document)=>Array.from(e.querySelectorAll(t)),p={menuToggle:h("#menu-toggle"),sidebar:h(t),navLinks:g(e),backToTop:h(o),progressFill:h(r),searchBtn:h(i),searchModal:h(s),searchBackdrop:h(a),searchInput:h(c),searchResults:h(l),mainContent:h(d),sectionHeaders:g(u)};function b(){return window.matchMedia("(max-width: 979px)").matches}function v(t){const e=document.createElement("div");return e.textContent=t,e.innerHTML}function E(t){return t.toLowerCase().replace(/\s+/g," ").trim()}function T(t){let e=!1;return(...n)=>{e||(e=!0,window.requestAnimationFrame(()=>{t(...n),e=!1}))}}function w(t){p.sidebar&&p.menuToggle&&(p.sidebar.classList.toggle("open",t),p.menuToggle.setAttribute("aria-expanded",String(t)),document.body.style.overflow=t&&b()?"hidden":"")}function y(t,e=!0){if(!t||"#"===t)return!1;const n=h(t);return!!n&&(n.scrollIntoView({behavior:"smooth",block:"start"}),e&&history.replaceState(null,"",t),n.setAttribute("tabindex","-1"),n.focus({preventScroll:!0}),window.setTimeout(()=>n.removeAttribute("tabindex"),400),!0)}function A(){const t=window.scrollY||document.documentElement.scrollTop,e=document.documentElement.scrollHeight-window.innerHeight,n=e>0?Math.min(t/e,1):0;if(p.progressFill&&(p.progressFill.style.width=100*n+"%"),p.backToTop){const e=t>500;p.backToTop.hidden=!e,p.backToTop.setAttribute("aria-hidden",String(!e))}}function k(t){if(!t)return;const e=t.startsWith("#")?t:`#${t}`;"#"!==e&&e!==m&&(m=e,p.navLinks.forEach(t=>{const n=(t.getAttribute("href")||"")===e;t.classList.toggle("active",n),t.setAttribute("aria-current",n?"location":"false")}))}function L(){document.addEventListener("click",t=>{const e=t.target;if(!(e instanceof Element))return;const n=e.closest("a[href^='#']");if(!n)return;const o=n.getAttribute("href");if(!o||"#"===o)return;y(o)&&(k(o),t.preventDefault(),b()&&w(!1))}),window.location.hash&&window.setTimeout(()=>{y(window.location.hash,!1),k(window.location.hash)},60)}function x(t){p.searchResults&&(p.searchResults.innerHTML=`<p class="search-hint">${v(t)}</p>`)}function C(t,e){if(!p.searchResults)return;if(!e)return void x("Start typing to search across all sections.");if(e.length<2)return void x("Type at least 2 characters.");if(!t.length)return void x("No matches found. Try another keyword.");const n=t.map(t=>{const e=t.sectionTitle?`<span>${v(t.sectionTitle)}</span>`:"";return`\n          <li>\n            <button type="button" class="search-result-item" data-target="#${t.id}">\n              <strong>${v(t.rawTitle)}</strong>\n              ${e}\n            </button>\n          </li>`}).join("");p.searchResults.innerHTML=`<ul class="search-result-list">${n}</ul>`}function S(){const{searchBtn:t,searchModal:e,searchBackdrop:n,searchInput:o,searchResults:r}=p;if(!(t&&e&&o&&r))return;const i=function(){if(!p.mainContent)return[];const t=g("h2, h3",p.mainContent);let e=0;return t.map(t=>{const n=E(t.textContent||"");if(!n)return null;t.id||(e+=1,t.id=`auto-heading-${e}`);const o=t.closest("section[id]"),r=o?o.id:t.id,i=o?h(".section-title",o):null;return{title:n,rawTitle:(t.textContent||"").trim(),id:t.id,sectionId:r,sectionTitle:i?i.textContent.trim():""}}).filter(Boolean)}();function s(){e.hidden&&(f=document.activeElement instanceof HTMLElement?document.activeElement:null,e.hidden=!1,e.setAttribute("aria-modal","true"),document.body.style.overflow="hidden",window.requestAnimationFrame(()=>{o.focus(),o.select()}))}function a(){e.hidden||(e.hidden=!0,e.removeAttribute("aria-modal"),document.body.style.overflow=p.sidebar?.classList.contains("open")&&b()?"hidden":"",o.value="",x("Start typing to search across all sections."),f&&f.focus({preventScroll:!0}))}r.setAttribute("aria-live","polite");const c=function(t,e){let n;return(...o)=>{window.clearTimeout(n),n=window.setTimeout(()=>t(...o),e)}}(()=>{const t=E(o.value);if(!t)return void C([],t);const e=t.split(" ").filter(Boolean);C(i.map(n=>{const o=n.title.includes(t)?1:0,r=e.reduce((t,e)=>n.title.includes(e)?t+1:t,0);return{item:n,score:10*o+r}}).filter(t=>t.score>0).sort((t,e)=>e.score-t.score).slice(0,24).map(t=>t.item),t)},120);t.addEventListener("click",s),n&&n.addEventListener("click",a),e.addEventListener("click",t=>{const e=t.target;if(!(e instanceof Element))return;const n=e.closest(".search-result-item");if(!n)return;const o=n.getAttribute("data-target");a(),o&&(k(o),y(o))}),o.addEventListener("input",c),o.addEventListener("keydown",t=>{if("Enter"===t.key){const e=h(".search-result-item",r);if(e){t.preventDefault();const n=e.getAttribute("data-target");a(),n&&(k(n),y(n))}}}),document.addEventListener("keydown",t=>{"Escape"===t.key&&(e.hidden?w(!1):a());const n=t.target instanceof HTMLElement&&("INPUT"===t.target.tagName||"TEXTAREA"===t.target.tagName||t.target.isContentEditable);"/"!==t.key||n||(t.preventDefault(),s())})}function M(){p.menuToggle&&p.sidebar&&(p.menuToggle.setAttribute("aria-expanded","false"),p.menuToggle.setAttribute("aria-controls","sidebar"),p.menuToggle.addEventListener("click",()=>{w(!p.sidebar.classList.contains("open"))}),document.addEventListener("click",t=>{if(!b())return;const e=t.target;e instanceof Element&&p.sidebar.classList.contains("open")&&(p.sidebar.contains(e)||p.menuToggle.contains(e)||w(!1))}),window.addEventListener("resize",T(()=>{b()||w(!1)}))),p.backToTop&&(p.backToTop.hidden=!0,p.backToTop.setAttribute("aria-hidden","true"),p.backToTop.addEventListener("click",()=>{window.scrollTo({top:0,behavior:"smooth"})})),L(),g(n).forEach(t=>{const e=t.getAttribute("data-target");if(!e)return;const n=document.getElementById(e);if(!n)return;t.setAttribute("aria-controls",e);const o="false"!==t.getAttribute("aria-expanded");n.hidden=!o,t.addEventListener("click",()=>{const e="true"!==t.getAttribute("aria-expanded");t.setAttribute("aria-expanded",String(e)),n.hidden=!e})}),S(),function(){const t=new Map;p.navLinks.forEach(e=>{const n=e.getAttribute("href")||"";if(n.startsWith("#")){const e=h(n);e&&e.id&&t.set(e.id,e)}});const e=Array.from(t.values());if(!e.length)return;const n=new IntersectionObserver(t=>{const e=t.filter(t=>t.isIntersecting).sort((t,e)=>e.intersectionRatio-t.intersectionRatio);if(!e.length)return;const n=e[0].target;n instanceof HTMLElement&&k(`#${n.id}`)},{threshold:[.15,.35,.6],rootMargin:"-15% 0px -55% 0px"});e.forEach(t=>n.observe(t))}(),p.sectionHeaders.forEach(t=>{const e=t.closest("section");if(!e||!e.id)return;if(!Array.from(e.children).filter(e=>e!==t).length)return;const n=document.createElement("button");n.type="button",n.className="section-collapse-toggle",n.textContent="Collapse",n.setAttribute("aria-expanded","true"),n.setAttribute("aria-controls",e.id),t.appendChild(n),n.addEventListener("click",()=>{const t=!("true"===n.getAttribute("aria-expanded"));n.setAttribute("aria-expanded",String(t)),n.textContent=t?"Collapse":"Expand",e.classList.toggle("is-collapsed",!t)})}),function(){if(!p.menuToggle&&!document.body)return;const t=document.createElement("button");t.type="button",t.id="theme-toggle",t.className="menu-toggle",t.setAttribute("aria-label","Toggle high contrast mode"),t.setAttribute("title","Toggle high contrast mode"),t.textContent="Aa",t.style.right="68px";const e="fastdoc-theme",n=t=>{document.documentElement.dataset.theme=t,"contrast"===t?(document.documentElement.style.setProperty("--text","#ffffff"),document.documentElement.style.setProperty("--text-soft","#f2f6ff"),document.documentElement.style.setProperty("--border","#4a678f")):(document.documentElement.style.removeProperty("--text"),document.documentElement.style.removeProperty("--text-soft"),document.documentElement.style.removeProperty("--border"))};"contrast"===localStorage.getItem(e)&&n("contrast"),t.addEventListener("click",()=>{const t="contrast"===document.documentElement.dataset.theme?"dark":"contrast";n(t),localStorage.setItem(e,t)}),document.body.appendChild(t)}();const t=T(A);window.addEventListener("scroll",t,{passive:!0}),A()}"loading"===document.readyState?document.addEventListener("DOMContentLoaded",M,{once:!0}):M()})();